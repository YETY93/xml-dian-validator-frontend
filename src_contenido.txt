=== src/app/app.config.ts ===
import { ApplicationConfig, provideBrowserGlobalErrorListeners } from '@angular/core';
import { provideRouter } from '@angular/router';

import { routes } from './app.routes';
import { es_ES, provideNzI18n } from 'ng-zorro-antd/i18n';
import { registerLocaleData } from '@angular/common';
import es from '@angular/common/locales/es';
import { provideHttpClient } from '@angular/common/http';

registerLocaleData(es);

export const appConfig: ApplicationConfig = {
  providers: [
    provideBrowserGlobalErrorListeners(),
    provideRouter(routes),
    provideNzI18n(es_ES),
    provideHttpClient(),
  ],
};
=== src/app/app.html ===
<nz-layout class="app-layout">
  <nz-header>
    <div class="header-content">
      <div class="logo">
        <span nz-icon nzType="safety-certificate" nzTheme="outline"></span>
        <h1>DIAN XML Validator</h1>
      </div>
    </div>
  </nz-header>

  <nz-content>
    <div class="inner-content">
      <router-outlet></router-outlet>
    </div>
  </nz-content>

  <nz-footer>DIAN XML Validator ©2026 - Herramienta de validación técnica</nz-footer>
</nz-layout>
=== src/app/app.scss ===
.app-layout {
  min-height: 100vh;
  background: #f0f2f5;

  nz-header {
    background: #fff;
    padding: 0 50px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    z-index: 10;
    height: 64px;
    display: flex;
    align-items: center;

    .header-content {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;

      .logo {
        display: flex;
        align-items: center;
        gap: 12px;

        span {
          font-size: 24px;
          color: #1890ff;
        }

        h1 {
          margin: 0;
          font-size: 18px;
          font-weight: 600;
          color: rgba(0, 0, 0, 0.85);
        }
      }
    }
  }

  nz-content {
    padding: 40px 0;

    .inner-content {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 24px;
    }
  }

  nz-footer {
    text-align: center;
    color: rgba(0, 0, 0, 0.45);
    background: transparent;
  }
}
=== src/app/app.spec.ts ===
import { TestBed } from '@angular/core/testing';
import { App } from './app';

describe('App', () => {
  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [App],
    }).compileComponents();
  });

  it('should create the app', () => {
    const fixture = TestBed.createComponent(App);
    const app = fixture.componentInstance;
    expect(app).toBeTruthy();
  });

  it('should render title', async () => {
    const fixture = TestBed.createComponent(App);
    await fixture.whenStable();
    const compiled = fixture.nativeElement as HTMLElement;
    expect(compiled.querySelector('h1')?.textContent).toContain('Hello, dian-xml-validator-front');
  });
});
=== src/app/core/services/xml-validation.service.ts ===
import { Injectable, inject } from '@angular/core';
import { XmlValidationRequest } from '../models/xml-validation-request.model';
import { Observable } from 'rxjs';
import { HttpClient } from '@angular/common/http';
import { XmlValidationResult } from '../models/xml-validation-result';
import { ApiResponse } from '../models/api-response';

@Injectable({
  providedIn: 'root',
})
export class XmlvalidationsService {
  private readonly API_BASE_URL = 'http://localhost:8080';
  private readonly API_URL = '/api/xml/validate';
  private readonly http = inject(HttpClient);

  validateXml(request: XmlValidationRequest): Observable<ApiResponse<XmlValidationResult>> {
    const url = `${this.API_BASE_URL}${this.API_URL}`;
    return this.http.post<ApiResponse<XmlValidationResult>>(url, request);
  }
}
=== src/app/core/models/enums/status-error-enum.ts ===
export enum EstatusErrorEnum {
  INFO = 'info',
  WARNING = 'warning',
  ERROR = 'error',
}
=== src/app/core/models/enums/validation-errorType-enum.ts ===
export enum ValidationErrorType {
  XSD = 'XSD',
  SEMANTIC = 'SEMANTIC',
  SIGNATURE = 'SIGNATURE',
}
=== src/app/core/models/enums/type-doucument-enum.ts ===
export enum TypeDocumentEnum {
  INVOICE = 'INVOICE',
  CREDIT_NOTE = 'CREDIT_NOTE',
  DEBIT_NOTE = 'DEBIT_NOTE',
  DOCUMENTO_SOPORTE = 'DOCUMENTO_SOPORTE',
}
=== src/app/core/models/api-response.ts ===
export interface ApiResponse<T> {
  success: boolean;
  status: 'SUCCESS' | 'ERROR';
  code: string;
  action: string;
  lastAction: string;
  data: T;
}
=== src/app/core/models/validation-issue.model.ts ===
import { EstatusErrorEnum } from './enums/status-error-enum';
import { ValidationErrorType } from './enums/validation-errorType-enum';

export interface ValidationIssue {
  type: ValidationErrorType;
  severity: EstatusErrorEnum;
  message: string;
}
=== src/app/core/models/xml-validation-request.model.ts ===
import { TypeDocumentEnum } from './enums/type-doucument-enum';

export interface XmlValidationRequest {
  documentType: TypeDocumentEnum;
  xml: string;
  technicalKey?: string;
}
=== src/app/core/models/xml-validation-response.model.ts ===
import { EstatusErrorEnum } from './enums/status-error-enum';

export interface XmlValidationResponse {
  success: boolean;
  status: string;
  action: string;
  errors: string[];
  maxSeverity: EstatusErrorEnum;
}
=== src/app/core/models/xml-validation-result.ts ===
import { EstatusErrorEnum } from './enums/status-error-enum';
import { ValidationIssue } from './validation-issue.model';

export interface XmlValidationResult {
  valid: boolean;
  maxSeverity: EstatusErrorEnum;
  errors: ValidationIssue[];
}
=== src/app/core/core.module.ts ===
=== src/app/features/validation/validation.component.html ===
<nz-card [nzBordered]="false" class="validation-card">
  <div class="card-header">
    <div class="title-section">
      <span nz-icon nzType="file-search" nzTheme="outline" class="title-icon"></span>
      <h2>Validación de Documento</h2>
    </div>
    @if (validated() && maxSeverity()) {
      <nz-tag [nzColor]="getSeverityColor(maxSeverity()!)" class="status-tag">
        <span nz-icon [nzType]="maxSeverity() === EstatusErrorEnum.INFO ? 'check-circle' : 'exclamation-circle'"></span>
        {{ getSeverityLabel(maxSeverity()!) }}
      </nz-tag>
    }
  </div>

  <nz-divider></nz-divider>

  <form nz-form nzLayout="vertical">
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-label nzRequired>Tipo de documento</nz-form-label>
          <nz-form-control>
            <nz-select [ngModel]="documentType()" (ngModelChange)="documentType.set($event)" name="docType" nzSize="large">
              <nz-option [nzValue]="TypeDocumentEnum.INVOICE" nzLabel="Factura electrónica"></nz-option>
              <nz-option [nzValue]="TypeDocumentEnum.CREDIT_NOTE" nzLabel="Nota crédito" nzDisabled></nz-option>
              <nz-option [nzValue]="TypeDocumentEnum.DEBIT_NOTE" nzLabel="Nota débito" nzDisabled></nz-option>
              <nz-option [nzValue]="TypeDocumentEnum.DOCUMENTO_SOPORTE" nzLabel="Documento Soporte" nzDisabled></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-label>Clave técnica <span class="optional-label">(Opcional)</span></nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="technicalKey" name="techKey" placeholder="Ingrese clave técnica si aplica" nzSize="large" />
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>

    <nz-form-item>
      <nz-form-label>Archivo XML</nz-form-label>
      <nz-form-control>
        @if (!fileLoaded()) {
          <nz-upload
            nzType="drag"
            [nzMultiple]="false"
            [nzBeforeUpload]="beforeUpload"
            class="xml-dragger"
          >
            <p class="ant-upload-drag-icon">
              <span nz-icon nzType="inbox"></span>
            </p>
            <p class="ant-upload-text">Haz clic o arrastra el archivo XML aquí</p>
            <p class="ant-upload-hint">Soporta un solo archivo .xml</p>
          </nz-upload>
        } @else {
          <div class="file-info-box">
            <div class="file-details">
              <span nz-icon nzType="file-text" nzTheme="twotone"></span>
              <span class="file-name">{{ fileName() }}</span>
            </div>
            <button nz-button nzType="text" nzDanger (click)="reset()">
              <span nz-icon nzType="delete"></span>
              Cambiar archivo
            </button>
          </div>
          <nz-collapse nzGhost style="margin-top: 8px;">
            <nz-collapse-panel nzHeader="Ver contenido XML">
               <textarea nz-input [nzAutosize]="{ minRows: 4, maxRows: 10 }" [ngModel]="xml()" (ngModelChange)="xml.set($event)" name="xmlContent" class="xml-textarea"></textarea>
            </nz-collapse-panel>
          </nz-collapse>
        }
      </nz-form-control>
    </nz-form-item>

    <div class="actions-section">
      <nz-space [nzSize]="'middle'">
        <button *nzSpaceItem nz-button nzType="primary" nzSize="large" (click)="validate()" [nzLoading]="loading()" [disabled]="!xml()">
          <span nz-icon nzType="play-circle"></span>
          Iniciar Validación
        </button>
        <button *nzSpaceItem nz-button nzType="default" nzSize="large" (click)="reset()" [disabled]="loading() || (!xml() && !validated())">
          Limpiar
        </button>
      </nz-space>
    </div>
  </form>

    @if (loading()) {
    <div class="loading-container">
      <nz-spin nzSimple nzSize="large" nzTip="Validando documento..."></nz-spin>
    </div>
    }

    @if (errors().length > 0) {
    <div class="error-banner-section">
      @for (err of errors(); track $index) {
      <nz-alert [nzType]="err.type" [nzMessage]="err.message" nzShowIcon nzBanner class="error-banner"></nz-alert>
      }
    </div>
    }

  @if (validated()) {
    <div class="results-section">
      <nz-divider nzText="Resultados de la Validación" nzOrientation="left"></nz-divider>

      @if (maxSeverity() === EstatusErrorEnum.INFO && !hasAnyErrors()) {
        <nz-result
          nzStatus="success"
          nzTitle="Documento Válido"
          nzSubTitle="El archivo XML cumple con todas las validaciones técnicas de la DIAN."
        >
        </nz-result>
      }

      @if (hasAnyErrors()) {
        <div class="error-groups">
          <nz-collapse [nzBordered]="false">
            <nz-collapse-panel
              [nzHeader]="xsdHeader"
              [nzActive]="errorsByType().XSD.length > 0"
              [nzDisabled]="errorsByType().XSD.length === 0"
              class="error-panel xsd-panel"
            >
              <ng-template #xsdHeader>
                <div class="panel-header">
                  <span nz-icon nzType="code" nzTheme="outline"></span>
                  <span>Errores de Esquema (XSD)</span>
                  <nz-tag nzColor="error" *ngIf="errorsByType().XSD.length">{{ errorsByType().XSD.length }}</nz-tag>
                </div>
              </ng-template>
              @for (err of errorsByType().XSD; track $index) {
                <nz-alert nzType="error" [nzMessage]="err.message" nzShowIcon class="error-alert"></nz-alert>
              }
            </nz-collapse-panel>

            <nz-collapse-panel
              [nzHeader]="semanticHeader"
              [nzActive]="errorsByType().SEMANTIC.length > 0"
              [nzDisabled]="errorsByType().SEMANTIC.length === 0"
              class="error-panel semantic-panel"
            >
              <ng-template #semanticHeader>
                <div class="panel-header">
                  <span nz-icon nzType="reconciliation" nzTheme="outline"></span>
                  <span>Errores Semánticos y Reglas</span>
                  <nz-tag [nzColor]="errorsByType().SEMANTIC.length ? 'warning' : 'default'">{{ errorsByType().SEMANTIC.length }}</nz-tag>
                </div>
              </ng-template>
              @for (err of errorsByType().SEMANTIC; track $index) {
                <nz-alert [nzType]="err.severity" [nzMessage]="err.message" nzShowIcon class="error-alert"></nz-alert>
              }
            </nz-collapse-panel>

            <nz-collapse-panel
              [nzHeader]="signatureHeader"
              [nzActive]="errorsByType().SIGNATURE.length > 0"
              [nzDisabled]="errorsByType().SIGNATURE.length === 0"
              class="error-panel signature-panel"
            >
              <ng-template #signatureHeader>
                <div class="panel-header">
                  <span nz-icon nzType="lock" nzTheme="outline"></span>
                  <span>Errores de Firma Digital</span>
                  <nz-tag nzColor="error" *ngIf="errorsByType().SIGNATURE.length">{{ errorsByType().SIGNATURE.length }}</nz-tag>
                </div>
              </ng-template>
              @for (err of errorsByType().SIGNATURE; track $index) {
                <nz-alert nzType="error" [nzMessage]="err.message" nzShowIcon class="error-alert"></nz-alert>
              }
            </nz-collapse-panel>
          </nz-collapse>
        </div>
      }
    </div>
  }
</nz-card>
=== src/app/features/validation/validation.component.scss ===
.validation-card {
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);

  .error-banner-section {
    margin-top: 24px;

    .error-banner {
      margin-bottom: 8px;
      border-radius: 6px;
    }
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;

    .title-section {
      display: flex;
      align-items: center;
      gap: 12px;

      .title-icon {
        font-size: 24px;
        color: #1890ff;
      }

      h2 {
        margin: 0;
        font-size: 20px;
        font-weight: 600;
        color: rgba(0, 0, 0, 0.85);
      }
    }

    .status-tag {
      font-size: 14px;
      padding: 4px 12px;
      border-radius: 20px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
    }
  }

  .optional-label {
    font-weight: normal;
    color: rgba(0, 0, 0, 0.45);
    margin-left: 4px;
  }

  .xml-dragger {
    background: #fafafa;
    border-radius: 8px;
    transition: all 0.3s;

    &:hover {
      background: #f0f7ff;
    }
  }

  .file-info-box {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #e6f7ff;
    border: 1px solid #91d5ff;
    padding: 12px 16px;
    border-radius: 8px;

    .file-details {
      display: flex;
      align-items: center;
      gap: 8px;

      span[nz-icon] {
        font-size: 20px;
      }

      .file-name {
        font-weight: 500;
        color: #0050b3;
      }
    }
  }

  .xml-textarea {
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    font-size: 13px;
    background: #f5f5f5;
    border: 1px solid #d9d9d9;
    border-radius: 4px;
  }

  .actions-section {
    margin-top: 32px;
    display: flex;
    justify-content: center;
  }

  .loading-container {
    padding: 40px;
    text-align: center;
  }

  .results-section {
    margin-top: 40px;
    animation: fadeIn 0.5s ease;
  }

  .error-groups {
    .error-panel {
      margin-bottom: 12px;
      border-radius: 8px !important;
      overflow: hidden;
      border: 1px solid #f0f0f0;

      &.xsd-panel { border-left: 4px solid #ff4d4f; }
      &.semantic-panel { border-left: 4px solid #faad14; }
      &.signature-panel { border-left: 4px solid #ff4d4f; }

      .panel-header {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 600;

        span[nz-icon] {
          font-size: 18px;
        }
      }
    }

    .error-alert {
      margin-bottom: 8px;
      border-radius: 6px;
    }
  }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
=== src/app/features/validation/validation.component.ts ===
import { CommonModule } from '@angular/common';
import { Component, computed, DestroyRef, inject, signal } from '@angular/core';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { FormsModule } from '@angular/forms';
import { NzAlertModule } from 'ng-zorro-antd/alert';
import { NzButtonModule } from 'ng-zorro-antd/button';
import { NzCardModule } from 'ng-zorro-antd/card';
import { NzCollapseModule } from 'ng-zorro-antd/collapse';
import { NzDividerModule } from 'ng-zorro-antd/divider';
import { NzFormModule } from 'ng-zorro-antd/form';
import { NzGridModule } from 'ng-zorro-antd/grid';
import { NzIconModule } from 'ng-zorro-antd/icon';
import { NzInputModule } from 'ng-zorro-antd/input';
import { NzResultModule } from 'ng-zorro-antd/result';
import { NzSelectModule } from 'ng-zorro-antd/select';
import { NzSpaceModule } from 'ng-zorro-antd/space';
import { NzSpinModule } from 'ng-zorro-antd/spin';
import { NzTagComponent } from 'ng-zorro-antd/tag';
import { NzUploadFile, NzUploadModule } from 'ng-zorro-antd/upload';

import { EstatusErrorEnum } from '../../core/models/enums/status-error-enum';
import { TypeDocumentEnum } from '../../core/models/enums/type-doucument-enum';
import { ValidationErrorType } from '../../core/models/enums/validation-errorType-enum';
import { ValidationIssue } from '../../core/models/validation-issue.model';
import { XmlvalidationsService } from '../../core/services/xml-validation.service';

@Component({
  selector: 'app-validation',
  templateUrl: './validation.component.html',
  styleUrls: ['./validation.component.scss'],
  imports: [
    CommonModule,
    FormsModule,
    NzCardModule,
    NzFormModule,
    NzSelectModule,
    NzInputModule,
    NzButtonModule,
    NzAlertModule,
    NzTagComponent,
    NzCollapseModule,
    NzUploadModule,
    NzGridModule,
    NzIconModule,
    NzResultModule,
    NzDividerModule,
    NzSpaceModule,
    NzSpinModule,
  ],
})
export class ValidationComponent {
  private service = inject(XmlvalidationsService);
  private destroyRef = inject(DestroyRef);

  documentType = signal<TypeDocumentEnum>(TypeDocumentEnum.INVOICE);
  xml = signal<string>('');
  technicalKey = signal<string>('');
  errors = signal<{ type: EstatusErrorEnum; message: string }[]>([]);
  maxSeverity = signal<EstatusErrorEnum | null>(null);
  errorsByType = signal<Record<ValidationErrorType, ValidationIssue[]>>({
    XSD: [],
    SEMANTIC: [],
    SIGNATURE: [],
  });
  fileLoaded = signal<boolean>(false);
  loading = signal<boolean>(false);
  validated = signal<boolean>(false);
  fileName = signal<string>('');

  protected readonly TypeDocumentEnum = TypeDocumentEnum;
  protected readonly EstatusErrorEnum = EstatusErrorEnum;

  validate() {
    if (!this.xml()) return;

    this.loading.set(true);
    this.validated.set(false);
    this.errorsByType.set({
      [ValidationErrorType.XSD]: [],
      [ValidationErrorType.SEMANTIC]: [],
      [ValidationErrorType.SIGNATURE]: [],
    });

    this.service
      .validateXml({
        documentType: this.documentType(),
        xml: this.xml(),
        technicalKey: this.technicalKey(),
      })
      .pipe(takeUntilDestroyed(this.destroyRef))
      .subscribe({
        next: (response) => {
          const data = response.data;
          this.maxSeverity.set(data.maxSeverity);
          const grouped: Record<ValidationErrorType, ValidationIssue[]> = {
            [ValidationErrorType.XSD]: [],
            [ValidationErrorType.SEMANTIC]: [],
            [ValidationErrorType.SIGNATURE]: [],
          };
          data.errors.forEach((error) => {
            grouped[error.type].push(error);
          });

          this.errorsByType.set(grouped);
          this.validated.set(true);
          this.loading.set(false);
        },
        error: (err) => {
          this.loading.set(false);
          this.errors.set([
            {
              type: EstatusErrorEnum.ERROR,
              message:
                err?.error?.message ||
                'Error de conexión con el servidor de validación. Por favor, intente nuevamente.',
            },
          ]);
        },
      });
    this.errors.set([]);
  }

  reset() {
    this.xml.set('');
    this.fileLoaded.set(false);
    this.validated.set(false);
    this.maxSeverity.set(null);
    this.fileName.set('');
    this.errors.set([]);
    this.errorsByType.set({
      [ValidationErrorType.XSD]: [],
      [ValidationErrorType.SEMANTIC]: [],
      [ValidationErrorType.SIGNATURE]: [],
    });
  }

  beforeUpload = (file: NzUploadFile): boolean => {
    const isXml = file.type === 'text/xml' || file.name.endsWith('.xml');
    if (!isXml) {
      this.errors.set([
        {
          type: EstatusErrorEnum.ERROR,
          message: 'El archivo seleccionado no es un XML válido.',
        },
      ]);
      return false;
    }

    this.fileName.set(file.name);
    const reader = new FileReader();
    reader.onload = () => {
      this.xml.set(reader.result as string);
      this.fileLoaded.set(true);
    };
    reader.readAsText(file as unknown as File);
    return false; // Prevent auto-upload
  };

  getSeverityColor(severity: EstatusErrorEnum): string {
    switch (severity) {
      case EstatusErrorEnum.ERROR:
        return 'red';
      case EstatusErrorEnum.WARNING:
        return 'orange';
      case EstatusErrorEnum.INFO:
        return 'green';
      default:
        return 'default';
    }
  }

  getSeverityLabel(severity: EstatusErrorEnum): string {
    switch (severity) {
      case EstatusErrorEnum.ERROR:
        return 'Documento Inválido';
      case EstatusErrorEnum.WARNING:
        return 'Documento con Advertencias';
      case EstatusErrorEnum.INFO:
        return 'Documento Válido';
      default:
        return '';
    }
  }

  hasAnyErrors = computed(() => {
    const e = this.errorsByType();
    return e.XSD.length > 0 || e.SEMANTIC.length > 0 || e.SIGNATURE.length > 0;
  });
}
=== src/app/app.routes.ts ===
import { Routes } from '@angular/router';

export const routes: Routes = [
  { path: '', redirectTo: 'validation', pathMatch: 'full' },
  {
    path: 'validation',
    loadComponent: () =>
      import('./features/validation/validation.component').then((m) => m.ValidationComponent),
  },
  { path: '**', redirectTo: 'validation' },
];
=== src/app/app.ts ===
import { Component, signal } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import {
  NzContentComponent,
  NzFooterComponent,
  NzHeaderComponent,
  NzLayoutComponent,
} from 'ng-zorro-antd/layout';
import { NzIconModule } from 'ng-zorro-antd/icon';

@Component({
  selector: 'app-root',
  templateUrl: './app.html',
  styleUrl: './app.scss',
  imports: [
    RouterOutlet,
    NzLayoutComponent,
    NzHeaderComponent,
    NzContentComponent,
    NzFooterComponent,
    NzIconModule,
  ],
})
export class App {
  protected readonly title = signal('dian-xml-validator-front');
}
=== src/index.html ===
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>DianXmlValidatorFront</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
</body>
</html>
=== src/styles.scss ===
/* You can add global styles to this file, and also import other style files */
=== src/main.ts ===
import { bootstrapApplication } from '@angular/platform-browser';
import { appConfig } from './app/app.config';
import { App } from './app/app';

bootstrapApplication(App, appConfig).catch((err) => console.error(err));
